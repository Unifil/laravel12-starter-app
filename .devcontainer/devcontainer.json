{
  "name": "Laravel Codespace",

  // Usa o Dockerfile customizado acima
  "build": { "dockerfile": "Dockerfile" },

  // Monta o workspace corretamente em /workspaces/<nome-da-pasta>
  "workspaceMount": "source=${localWorkspaceFolder},target=/workspaces/${localWorkspaceFolderBasename},type=bind,consistency=cached",
  "workspaceFolder": "/workspaces/${localWorkspaceFolderBasename}",

  // Roda após criar o container: instala deps PHP e Node, gera a chave e injeta front-end
  "postCreateCommand": "if [ -f composer.json ]; then composer install && php artisan key:generate; fi && npm install",

  // Extensões recomendadas para VS Code
  "extensions": [
    "bmewburn.vscode-intelephense-client",
    "mikestead.dotenv",
    "onecentlin.laravel-blade",
    "eamodio.gitlens"
  ],

  // Encaminhamento de porta para `php artisan serve`
  "forwardPorts": [8000],
  "portsAttributes": {
    "8000": { "label": "Laravel App" }
  },

  // Executa como vscode (criador acima)
  "remoteUser": "vscode"
}
